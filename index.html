<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>订单记录</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
  </head>
  <body>
    <main class="page">
      <header class="header">
        <div>
          <h1>订单记录</h1>
          <p>管理订单状态（Pending / Processing / Delivering / Complete）并记录配送位置。</p>
        </div>
        <button class="primary" id="addOrder">新增订单</button>
      </header>

      <section class="layout">
        <div class="card" id="ordersCard">
          <div class="card-header">
            <h2>订单列表</h2>
            <div class="filter">
              <label for="statusFilter">筛选</label>
              <select id="statusFilter">
                <option value="all">全部</option>
                <option value="Pending">Pending</option>
                <option value="Processing">Processing</option>
                <option value="Delivering">Delivering</option>
                <option value="Complete">Complete</option>
              </select>
            </div>
          </div>
          <div class="orders" id="orders"></div>
        </div>

        <div class="card">
          <div class="card-header">
            <h2>配送地图</h2>
            <p class="muted">点击订单选择位置，可拖拽标记更新坐标。</p>
          </div>
          <div id="map"></div>
          <div class="map-footer">
            <span id="mapHint">请选择一个订单以定位。</span>
            <button class="ghost" id="clearLocation" disabled>清除位置</button>
          </div>
        </div>
      </section>
    </main>

    <dialog id="orderDialog">
      <form id="orderForm">
        <h3 id="dialogTitle">新增订单</h3>
        <label>
          订单名称
          <input id="orderName" type="text" required placeholder="如：订单 #001" />
        </label>
        <label>
          客户
          <input id="orderCustomer" type="text" required placeholder="如：王先生" />
        </label>
        <label>
          状态
          <select id="orderStatus">
            <option value="Pending">Pending</option>
            <option value="Processing">Processing</option>
            <option value="Delivering">Delivering</option>
            <option value="Complete">Complete</option>
          </select>
        </label>
        <label>
          备注
          <textarea id="orderNote" rows="3" placeholder="补充说明"></textarea>
        </label>
        <menu>
          <button type="button" class="ghost" id="cancelDialog">取消</button>
          <button type="submit" class="primary">保存</button>
        </menu>
      </form>
    </dialog>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script src="app.js"></script>
  </body>
</html>
